# vk-task

Этот репозиторий содержит реализацию тестового задания для стажировки ВКонтакте.

Посмотреть на результат можно [здесь](https://danyadev.github.io/vk-task/).

## Поле для ввода текста

Я добавил максимальную высоту, но при этом убрал скроллбар внутри:
- добавить кастомный скроллбар в данном случае проблематично
- дефолтный скроллбар на винде (где я и сижу) выглядит ужасно

Кнопка для открытия окошка с эмодзи разделяет поле на текст и вертикальную полоску с кнопкой.
Возможно и существует возможность расположить кнопку так, чтобы текст мог быть и под кнопкой
(как показано в фигме), но это наверняка был бы костыль, да и такого функционала я нигде не видел:
в вебе, в мессенджере, в мобильном приложении - везде реализация такая же, как и у меня.

## Окошко с эмодзи

Стрелка, указывающая на кнопку открытия окошка, получилась довольно острой (прямо как в vk.com),
но мне кажется нет особого смысла вырезать из фигмы кусочек с гладкой стрелкой и вставлять
в верстку, особенно когда я почти не умею работать с фигмой в плане дизайнера.

Или существуют другие простые способы сделать гладкую стрелку?

## Кастомный скроллбар

Да, здесь есть даже он. И не какой-то левый модуль, а самописный компонент, который я
реализовал для своего [клиента](https://github.com/danyadev/vk-desktop)!

Здесь использовал немного обрезанную версию: выкинул лишний код и немного поменял стили,
чтобы соответствовать макету и поведению в vk.com.

## Использование спрайтов для отображения эмодзи

Существует несколько способов реализовать отображение эмодзей по спрайтам.

Я выбрал второй вариант, потому что при попытке реализации первого у меня поломался
один из css-лоадеров.

### Способ первый

Он используется в vk.com: добавляем в класс тега `i` hex-код эмодзи и устанавливаем
в стилях все расположения эмодзей в спрайтах.

Данный способ работает неплохо, но вот только css кода при этом оказывается довольно
много - больше 300кб.

### Способ второй

Этот способ используется уже в моем мессенджере: мы генерируем .json файл с
эмодзями и их расположениями в спрайтах. Таким образом можно сократить объем хранимых
данных до менее 100кб. Мне же удалось уместить все
[данные](https://github.com/danyadev/vk-desktop/blob/master/src/js/json/localEmoji.json)
в 61кб, используя небольшой костыль для сжатия.

### Способ третий

Мы можем хранить просто список эмодзей без позиций, ведь мы можем их посчитать самостоятельно!

Все спрайты (кроме последнего) имеют одинаковую высоту и ширину, а последний спрайт на данный
момент содержит 4 эмодзи, которые можно разместить в одной строке.

Зная количество строк и столбцов, мы можем по позиции эмодзи в списке посчитать
номер спрайта, его строку и столбец, и затем уже вычислить координаты в пикселях.

Этот вариант можно считать как доработку второго, ибо мы так же создаем отдельный файл
с эмодзями и гонимся за минимизированием хранимых данных.

Но возможно в плане производительности это будет работать не так хорошо,
ведь нам нужно каждый раз искать эмодзи в гигантском списке и делать небольшие расчеты
либо один раз посчитать абсолютно все координаты и хранить в памяти жирный объект (или мапу).
